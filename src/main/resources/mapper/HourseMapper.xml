<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.project.dao.HourseMapper">
  <resultMap id="BaseResultMap" type="com.company.project.model.Hourse">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="building_id" jdbcType="BIGINT" property="buildingId" />
    <result column="num" jdbcType="VARCHAR" property="num" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="is_rent" jdbcType="VARCHAR" property="isRent" />
    <result column="rent_id" jdbcType="VARCHAR" property="rentId" />
    <result column="create_time" jdbcType="VARCHAR" property="createTime" />
    <result column="update_time" jdbcType="VARCHAR" property="updateTime" />
    <result column="is_auth" jdbcType="VARCHAR" property="isAuth" />
    <result column="ext1" jdbcType="VARCHAR" property="ext1" />
    <result column="ext2" jdbcType="VARCHAR" property="ext2" />
    <result column="ext3" jdbcType="VARCHAR" property="ext3" />
  </resultMap>
  <select id="findHouse" resultMap="BaseResultMap" parameterType="string">
  	SELECT hu.* from h_hourse hu
	LEFT JOIN h_user u on hu.user_id = u.id
	where u.`name` LIKE CONCAT('%',#{name},'%') and u.phone=#{phone} and hu.is_rent='F'
	union
	SELECT hu.* from h_hourse hu
	LEFT JOIN h_user u on hu.rent_id = u.id
	where u.`name` LIKE CONCAT('%',#{name},'%') and u.phone=#{phone} and hu.is_rent='T'
  </select>
</mapper>